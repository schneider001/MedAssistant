
Enum "patients_sex_enum" {
  "male"
  "female"
}

Enum "requests_status_enum" {
  "in_progress"
  "ready"
  "error"
}

Table "doctors" {
  "id" integer [pk, increment]
  "username" varchar(255) [unique, not null]
  "name" varchar(255)
  "password_hash" blob [not null]
  "last_login" timestamp
  "image_path_location" varchar(1024)
}

Table "patients" {
  "id" integer [pk, increment]
  "name" varchar(255) [not null]
  "insurance_certificate" varchar(255) [unique, not null]
  "born_date" timestamp
  "sex" patients_sex_enum
  "image_path_location" varchar(1024)
}

Table "administrators" {
  "id" integer [pk, increment]
  "username" varchar(255) [unique, not null]
  "name" varchar(255)
  "password_hash" blob [not null]
}

Table "symptoms" {
  "id" integer [pk, increment]
  "name" varchar(255) [unique, not null]
}

Table "diseases" {
  "id" integer [pk, increment]
  "name" varchar(255) [unique, not null]
}

Table "ml_model" {
  "id" integer [pk, increment]
  "hash" blob
  "version" varchar(255)
}

Table "requests" {
  "id" integer [pk, increment]
  "doctor_id" integer [not null]
  "patient_id" integer [not null]
  "predicted_disease_id" integer
  "status" requests_status_enum [not null, default: "in_progress"]
  "date" timestamp [default: `NOW()`]
  "ml_model_id" integer
}

Table "request_symptoms" {
  "symptom_id" integer [not null]
  "request_id" integer [not null]

Indexes {
  (symptom_id, request_id) [unique]
}
}

Table "comments" {
  "doctor_id" integer [not null]
  "request_id" integer [not null]
  "comment" varchar(255) [not null]

Indexes {
  (doctor_id, request_id) [unique]
}
}

Ref:"doctors"."id" < "requests"."doctor_id"

Ref:"patients"."id" < "requests"."patient_id"

Ref:"diseases"."id" < "requests"."predicted_disease_id"

Ref:"ml_model"."id" < "requests"."ml_model_id"

Ref:"symptoms"."id" < "request_symptoms"."symptom_id"

Ref:"requests"."id" < "request_symptoms"."request_id"

Ref:"doctors"."id" < "comments"."doctor_id"

Ref:"requests"."id" < "comments"."request_id"
